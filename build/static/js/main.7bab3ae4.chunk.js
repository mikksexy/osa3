(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r=t(18),a=t.n(r),c=t(4),u=t(2),o=t(3),i=t.n(o),s=t(5),l=t(6),d=t.n(l),f="/api/persons",b=function(){var e=Object(s.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.get(f),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.post(f,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(f,"/").concat(n),r=d.a.delete(t),e.next=4,r;case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(i.a.mark((function e(n,t,r){var a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(f,"/").concat(n),c=d.a.put(a,{name:t,number:r}),e.next=4,c;case 4:return u=e.sent,e.abrupt("return",u.data);case 6:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),p={getAll:b,create:j,remove:h,update:m},v=(t(42),t(0)),O=function(e){return Object(v.jsx)("div",{children:e.persons.map((function(n){return Object(v.jsx)(x,{person:n,removePerson:e.removePerson},n.name)}))})},x=function(e){return Object(v.jsxs)("div",{children:[e.person.name," ",e.person.number,Object(v.jsx)("button",{onClick:function(){return e.removePerson(e.person)},children:"delete"})]})},w=function(e){return Object(v.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(v.jsxs)("div",{children:["name: ",Object(v.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(v.jsxs)("div",{children:["number: ",Object(v.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){return Object(v.jsxs)("div",{children:["filter shown with",Object(v.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},C=function(e){var n=e.message;return null===n?null:n.includes("failed")?Object(v.jsx)("div",{className:"error",children:n}):Object(v.jsx)("div",{className:"success",children:n})},N=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(u.useState)(""),o=Object(c.a)(a,2),i=o[0],s=o[1],l=Object(u.useState)(""),d=Object(c.a)(l,2),f=d[0],b=d[1],j=Object(u.useState)(""),h=Object(c.a)(j,2),m=h[0],x=h[1],N=Object(u.useState)(null),k=Object(c.a)(N,2),y=k[0],S=k[1];Object(u.useEffect)((function(){p.getAll().then((function(e){r(e)}))}),[]);var P=t?t.filter((function(e){return!0===e.name.toLowerCase().includes(m.toLowerCase())})):t;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Phonebook"}),Object(v.jsx)(C,{message:y}),Object(v.jsx)(g,{newFilter:m,handleFilterChange:function(e){x(e.target.value)}}),Object(v.jsx)("h3",{children:"add a new"}),Object(v.jsx)(w,{handleSubmit:function(e){e.preventDefault();var n={name:i,number:f};if(""!==i)if(!0!==t.some((function(e){return e.name===i})))p.create(n).then((function(e){r(t.concat(n)),s(""),b(""),S("Added ".concat(n.name)),setTimeout((function(){S(null)}),5e3)})).catch((function(e){console.log(e.response.data),S(e.response.data.error),setTimeout((function(){S(null)}),5e3)}));else{var a=t.find((function(e){return e.name===i})).id;if(!1===window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?")))return;p.update(a,i,f).then((function(e){r(t.map((function(n){return n.id!==a?n:e}))),S("Updated ".concat(i)),setTimeout((function(){S(null)}),5e3)})).catch((function(e){S("Information of ".concat(i," has already been removed from the server")),setTimeout((function(){S(null)}),5e3),r(t.filter((function(e){return e.id!==a})))}))}},handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){b(e.target.value)},newName:i,newNumber:f}),Object(v.jsx)("h3",{children:"Numbers"}),Object(v.jsx)(O,{persons:P,removePerson:function(e){!1!==window.confirm("Delete ".concat(e.name," ?"))&&p.remove(e.id).then((function(n){r(t.filter((function(n){return n.id!==e.id}))),S("Removed ".concat(e.name)),setTimeout((function(){S(null)}),5e3)}))}})]})};a.a.render(Object(v.jsx)(N,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.7bab3ae4.chunk.js.map